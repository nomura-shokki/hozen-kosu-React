{% load static %}
<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{title}}</title>
    <link rel="icon" type="image/x-icon" href="{% static 'kosu/img/memo.png' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="{% static 'kosu/css/bootstrap.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'kosu/css/custom.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'kosu/css/console.css' %}">
    <script src="{% static 'kosu/js/check_storage2.js' %}"></script>
  </head>
  <body>
    <div id="content" class="container content">
      <h1 class="display-1 text-dark">{{title}}</h1>
      <p class="h6 no-wrap">
        <a href="{% url 'administrator' %}" class="text-dark">管理者MENUへ</a>　　
        <a href="{% url 'main' %}" class="text-dark">メインMENUへ</a>
      </p>
      <p>　</p>
      <form action="{% url 'history_list' pk %}" method="post">
        {% csrf_token %}
        <table class="table table-borderless">
          <tr>
            <th>{{form.name_list.label}}:</th>
            <th>{{form.day.label}}:</th>
            <th>{{form.model_list.label}}:</th>
            <th>{{form.page_list.label}}:</th>
          </tr>
          <tr>
            <td>{{form.name_list}}</td>
            <td>{{form.day}}</td>
            <td>{{form.model_list}}</td>
            <td>{{form.page_list}}</td>
          </tr>
          <tr>
            <td><input type="submit" value="検索" name=find class="btn btn-gray2 mt-2"></td>
          </tr>
          <tr><td>　</td></tr>
          <tr>
            <td colspan="4">
              <div class="number-input-group">
                <input type="date" class="form-control custom-border" style="width: 210px;" name="delete_day" id="delete_day">　～　　
                <input type="submit" value="削除" name=delete class="btn btn-gray2 mt-2">
              </div>
            </td>
          </tr>
        </table>
        <p>　</p>
        <div class="table-responsive">
          <table class="table text-nowrap table-custom">
            <tr>
              <th style="text-align:center;">編集者</th>
              <th style="text-align:center;">編集日</th>
              <th style="text-align:center;">モデル</th>
              <th style="text-align:center;">ページ</th>
              <th style="text-align:center;">結果</th>
            </tr>
            {% for i in data %}
              <tr>
                <td style="text-align:center;">
                  {{i.name}}
                </td>
                <td style="text-align:center;">
                  {{i.created_at|date:"Y-m-d"}}
                </td>
                <td style="text-align:center;">
                  {{i.operation_models}}
                </td>
                <td style="text-align:center;">
                  {{i.post_page}}
                </td>
                <td style="text-align:center;">
                  {{i.status}}
                </td>
                <td style="text-align:center;">
                  <a href="{% url 'history_delete' i.id %}" class="text-dark">詳細</a>
                </td>
              </tr>
            {% endfor %}
          </table>
        </div>
        <ul class="pagination justify-content-center">
          {% if data.has_previous %}
          <li class="page-item">
            <a class="page-link text-dark" href="{% url 'history_list' 1 %}">
              &laquo; 最初</a>
          </li>
          <li class="page-item">
            <a class="page-link text-dark" 
              href="{% url 'history_list' data.previous_page_number %}">
              &laquo; 前</a>
          </li>
          {% else %}
          <li class="page-item">
            <a class="page-link text-dark">
              &laquo; 最初</a>
          </li>
          <li class="page-item">
            <a class="page-link text-dark">
              &laquo; 前</a>
          </li>
          {% endif %}
          <li class="page-item">
            <a class="page-link text-dark">
              {{data.number}}/{{data.paginator.num_pages}}</a>
          </li>
          {% if data.has_next %}
          <li class="page-item">
            <a class="page-link text-dark" 
              href="{% url 'history_list' data.next_page_number %}">
                次&raquo;</a>
          </li>
          <li class="page-item">
            <a class="page-link text-dark" 
              href="{% url 'history_list' data.paginator.num_pages %}">
                最後&raquo;</a>
          </li>
          {% else %}
          <li class="page-item">
            <a class="page-link text-dark">
              次&raquo;</a>
          </li>
          <li class="page-item">
            <a class="page-link text-dark">
              最後&raquo;</a>
          </li>
          {% endif %}
        </ul>
      </form>
    </div>
    <div id="consoleDiv"></div>
  </body>
</html>