{% load static %}
<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{title}}</title>
    <link rel="icon" type="image/x-icon" href="{% static 'kosu/img/memo.png' %}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.5.1/dist/chart.min.js"></script>
    <script src="{% static 'kosu/js/jquery-clock-timepicker.js' %}"></script>
    <script src="{% static 'kosu/js/form_post_stop.js' %}"></script>
    <script src="{% static 'kosu/js/over_time_display.js' %}"></script>
    <script src="{% static 'kosu/js/clock_setting.js' %}"></script>
    {% if member_obj.def_prediction == True %}
      <script src="{% static 'kosu/js/def_prediction.js' %}"></script>
    {% endif %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="{% static 'kosu/css/bootstrap.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'kosu/css/custom.css' %}">
  </head>
  <body class="container">
    <div id="success-message"><span>工数登録完了</span></div>
    <h1 class="display-6 text-primary">{{member_obj.name}}さんの{{title}}</h1>
    <div class="number-input-group">
      <p class="h6 no-wrap">
        <a href="{% url 'kosu_main' %}">工数MENUへ</a>　　
        <a href="{% url 'kosu_list' 1 %}">履歴へ</a>　　
        {% if obj_link == True %}
          <a href="{% url 'detail' obj_get.id %}">工数編集</a>　　
        {% endif %}
        <a href="{% url 'main' %}">メインMENUへ</a>
      </p>
    </div>
    {% if def_alarm == True %}
      <h1 class="display-6 text-danger">ーーー　警告　ーーー</h6>
      <P class="fs-6 text-danger">
        工数区分定義が古い定義になっています。<br>
        定義変更前の過去の業務工数を打つなどの特別な目的がない場合は定義のバージョンを切り替えて下さい。<br>
        (手動で切り替えるかログインし直すと最新の定義が設定されます。)
      </p>
    {% endif %}
    <form id="work-form" action="{% url 'input' %}" method="post">
      {% csrf_token %}
      {% for message in messages %}
        <div {% if message.tags %}class="{{ message.tags }}"{% endif %}>
          <p class="text-danger">
            {{ message }}
          </p>
        </div>
      {% endfor %}
      <table class="table table-custom no-wrap">
        <tr>
          <th class="d-none d-md-table-cell" style="text-align:center;">
            就業日・勤務・直
          </th>
          <th style="text-align:center;" class="d-table-cell d-md-none">
            就業日
          </th>
          <td>
            <div class="number-input-group">
              <input type="date" class="form-control custom-border" style="width: 210px;" name="work_day" id="work_day" value={{new_day}}>　
              <div class="d-none d-md-table-cell"><div class="number-input-group">{{form.work}}　{{form.tyoku}}　</div></div>
              {% if OK_NG == True %}
                <b class="text-primary h4">OK</b>
              {% else %}
                <b class="text-danger h4">NG</b>
              {% endif %}
            </div>
          </td>
        </tr>
        <tr>
          <th class="d-table-cell d-md-none" style="text-align:center;">
            勤務
          </th>
          <td class="d-table-cell d-md-none">
            {{form.work2}}
          </td>
        </tr>
        <tr>
          <th class="d-table-cell d-md-none" style="text-align:center;">
            勤務直
          </th>
          <td class="d-table-cell d-md-none">
            {{form.tyoku2}}
          </td>
        </tr>
        <tr>
          <th style="text-align:center;">
            作業時間<br>
            <input type="submit" value="現在時刻"  name="now_time" class="btn btn-blue7 mt-2 d-table-cell d-md-none">
          </th>
          <td>
            <div class="number-input-group">
              <input class="your-time-field form-control custom-border" style="width : 90px;" type="text" id="start_time" name="start_time" data-precision="5" value={{default_start_time}}>
              ～
              <input class="your-time-field form-control custom-border" style="width : 90px;" type="text" id="end_time" name="end_time" data-precision="5" value={{default_end_time}}>　
              <div class="form-check form-check-inline custom-checkbox">
                {{form.tomorrow_check.label}}{{form.tomorrow_check}}
              </div>
              <p class="d-none d-md-table-cell">　　　　</p>
              <input type="submit" value="現在時刻"  name="now_time" class="btn btn-blue7 mt-2 d-none d-md-table-cell">
            </div>
          </td>
        </tr>
        <tr>
          <th style="text-align:center;">
            作業詳細
          </th>
          <td>
            <div class="number-input-group">
              {{form.work_detail}}　
              <div class="form-check form-check-inline custom-checkbox">
                {{form.def_prediction}}
              </div>
              <input type="submit" value="区分予測入"  name="def_check" class="btn btn-blue9 mt-2 btn-sm">
            </div>
          </td>
        </tr>
        <tr>
          <th style="text-align:center;">
            業務区分
          </th>
          <td>
            <div class="number-input-group">
              {{form.kosu_def_list}}
              <input type="submit" value="定義確認"  name="def_find" class="btn btn-green4 mt-2 btn-sm">
            </div>
          </td>
        </tr>
        <tr>
          <th style="text-align:center;">
            残業
          </th>
          <td>
            <div class="number-input-group">
              <button type="button" class="custom-button" onclick="decrement(this)">-</button>
              {{ form.over_work }}
              <button type="button" class="custom-button" onclick="increment(this)">+</button>　　
              <input type="submit" value="残業のみ修正"  name="over_time_correction" class="btn btn-blue7 mt-2 btn-sm">
            </div>
          </td>
        </tr>
        <tr>
          <th style="text-align:center;">
            休憩変更
          </th>
          <td>
            <div class="form-check form-check-inline custom-checkbox">
              {{form.break_change}}
              (休憩時間工数入力可)
            </div>
          </td>
        </tr>
        <tr><th><td>
          <div class="number-input-group">
            <input type="submit" value="工数登録"  name="Registration" class="btn btn-blue8 mt-2">　　　
            <input type="submit" value="休憩変更登録"  name="change_display" class="btn btn-blue7 mt-2">
          </div>
        </td></th></tr>
        <button id="update" name="update" class="btn btn-link"></button>
        <script src="{% static 'kosu/js/graph_update.js' %}"></script>
      </table>
      {% if obj_link != '' %}
        <table class="table no-wrap">
          <tr>
            <th style="text-align:center;">
              工数詳細
            </th>
            <th style="text-align:center;">
              工数区分
            </th>
          </tr>
          {% for i in time_display_list %}
            <tr>
              {% for k in i %}
                <div class="number-input-group">
                  <td style="text-align:center;">
                    {{k}}
                  </td>
                </div>
              {% endfor %}
            </tr>
          {% endfor %}
          <tr>
            <div class="number-input-group">
              <td style="text-align:center;">
                工数合計(基準時間)
              </td>
              <td style="text-align:center;">
                {{time_total}}分({{default_total}}分)
              </td>
            </div>
          </tr>
        </table>
      {% endif %}
      {% if show_message %}
        <script src="{% static 'kosu/js/completion_message.js' %}"></script>
      {% endif %}
    </form>
    <div style="width:100%">
      <canvas id="chart1" height="100pt"></canvas>
    </div>

    {% if member_obj.def_prediction == True %}
      <script>
        const dynamicChoicesUrl = "{% url 'dynamic_choices' %}";
        const allChoicesUrl = "{% url 'all_choices' %}";
        const csrfToken = "{{ csrf_token }}";
      </script>
    {% endif %}

    <script>
      var label_list1 = [];
      var data_list1 = [];
    </script>
    {% for i in graph_item %}
      <script>
        label_list1.push("{{ i }}");
      </script>
    {% endfor %}
    {% for n in graph_list %}
      <script>
        data_list1.push("{{ n }}");
      </script>
    {% endfor %}
    <script src="{% static 'kosu/js/time_graph.js' %}"></script>
    {% if def_n >= 1 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="plum" rx="5" ry="5" />
        </svg>
        {{def_library.0.1}}
      </p>
    {% endif %}
    {% if def_n >= 2 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="darkgray" rx="5" ry="5" />
        </svg>
        {{def_library.1.1}}
      </p>
    {% endif %}
    {% if def_n >= 3 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="slategray" rx="5" ry="5" />
        </svg>
        {{def_library.2.1}}
      </p>
    {% endif %}
    {% if def_n >= 4 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="steelblue" rx="5" ry="5" />
        </svg>
        {{def_library.3.1}}
      </p>
    {% endif %}
    {% if def_n >= 5 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="royalblue" rx="5" ry="5" />
        </svg>
        {{def_library.4.1}}
      </p>
    {% endif %}
    {% if def_n >= 6 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="dodgerblue" rx="5" ry="5" />
        </svg>
        {{def_library.5.1}}
      </p>
    {% endif %}
    {% if def_n >= 7 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="deepskyblue" rx="5" ry="5" />
        </svg>
        {{def_library.6.1}}
      </p>
    {% endif %}
    {% if def_n >= 8 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="aqua" rx="5" ry="5" />
        </svg>
        {{def_library.7.1}}
      </p>
    {% endif %}
    {% if def_n >= 9 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="mediumturquoise" rx="5" ry="5" />
        </svg>
        {{def_library.8.1}}
      </p>
    {% endif %}
    {% if def_n >= 10 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="lightseagreen" rx="5" ry="5" />
        </svg>
        {{def_library.9.1}}
      </p>
    {% endif %}
    {% if def_n >= 11 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="springgreen" rx="5" ry="5" />
        </svg>
        {{def_library.10.1}}
      </p>
    {% endif %}
    {% if def_n >= 12 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="limegreen" rx="5" ry="5" />
        </svg>
        {{def_library.11.1}}
      </p>
    {% endif %}
    {% if def_n >= 13 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="lawngreen" rx="5" ry="5" />
        </svg>
        {{def_library.12.1}}
      </p>
    {% endif %}
    {% if def_n >= 14 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="greenyellow" rx="5" ry="5" />
        </svg>
        {{def_library.13.1}}
      </p>
    {% endif %}
    {% if def_n >= 15 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="gold" rx="5" ry="5" />
        </svg>
        {{def_library.14.1}}
      </p>
    {% endif %}
    {% if def_n >= 16 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="darkorange" rx="5" ry="5" />
        </svg>
        {{def_library.15.1}}
      </p>
    {% endif %}
    {% if def_n >= 17 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="burlywood" rx="5" ry="5" />
        </svg>
        {{def_library.16.1}}
      </p>
    {% endif %}
    {% if def_n >= 18 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="sandybrown" rx="5" ry="5" />
        </svg>
        {{def_library.17.1}}
      </p>
    {% endif %}
    {% if def_n >= 19 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="lightcoral" rx="5" ry="5" />
        </svg>
        {{def_library.18.1}}
      </p>
    {% endif %}
    {% if def_n >= 20 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="lightsalmon" rx="5" ry="5" />
        </svg>
        {{def_library.19.1}}
      </p>
    {% endif %}
    {% if def_n >= 21 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="tomato" rx="5" ry="5" />
        </svg>
        {{def_library.20.1}}
      </p>
    {% endif %}
    {% if def_n >= 22 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="orangered" rx="5" ry="5" />
        </svg>
        {{def_library.21.1}}
      </p>
    {% endif %}
    {% if def_n >= 23 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="red" rx="5" ry="5" />
        </svg>
        {{def_library.22.1}}
      </p>
    {% endif %}
    {% if def_n >= 24 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="deeppink" rx="5" ry="5" />
        </svg>
        {{def_library.23.1}}
      </p>
    {% endif %}
    {% if def_n >= 25 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="hotpink" rx="5" ry="5" />
        </svg>
        {{def_library.24.1}}
      </p>
    {% endif %}
    {% if def_n >= 26 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="violet" rx="5" ry="5" />
        </svg>
        {{def_library.25.1}}
      </p>
    {% endif %}
    {% if def_n >= 27 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="magenta" rx="5" ry="5" />
        </svg>
        {{def_library.26.1}}
      </p>
    {% endif %}
      {% if def_n >= 28 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="mediumorchid" rx="5" ry="5" />
        </svg>
        {{def_library.27.1}}
      </p>
    {% endif %}
    {% if def_n >= 29 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="darkviolet" rx="5" ry="5" />
        </svg>
        {{def_library.28.1}}
      </p>
    {% endif %}
    {% if def_n >= 30 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="mediumpurple" rx="5" ry="5" />
        </svg>
        {{def_library.29.1}}
      </p>
    {% endif %}
    {% if def_n >= 31 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="mediumblue" rx="5" ry="5" />
        </svg>
        {{def_library.30.1}}
      </p>
    {% endif %}
    {% if def_n >= 32 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="cadetblue" rx="5" ry="5" />
        </svg>
        {{def_library.31.1}}
      </p>
    {% endif %}
    {% if def_n >= 33 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="mediumseagreen" rx="5" ry="5" />
        </svg>
        {{def_library.32.1}}
      </p>
    {% endif %}
    {% if def_n >= 34 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="forestgreen" rx="5" ry="5" />
        </svg>
        {{def_library.33.1}}
      </p>
    {% endif %}
    {% if def_n >= 35 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="darkkhaki" rx="5" ry="5" />
        </svg>
        {{def_library.34.1}}
      </p>
    {% endif %}
    {% if def_n >= 36 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="crimson" rx="5" ry="5" />
        </svg>
        {{def_library.35.1}}
      </p>
    {% endif %}
    {% if def_n >= 37 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="rosybrown" rx="5" ry="5" />
        </svg>
        {{def_library.36.1}}
      </p>
    {% endif %}
    {% if def_n >= 38 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="dimgray" rx="5" ry="5" />
        </svg>
        {{def_library.37.1}}
      </p>
    {% endif %}
    {% if def_n >= 39 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="midnightblue" rx="5" ry="5" />
        </svg>
        {{def_library.38.1}}
      </p>
    {% endif %}
    {% if def_n >= 40 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="darkblue" rx="5" ry="5" />
        </svg>
        {{def_library.39.1}}
      </p>
    {% endif %}
    {% if def_n >= 41 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="darkslategray" rx="5" ry="5" />
        </svg>
        {{def_library.40.1}}
      </p>
    {% endif %}
    {% if def_n >= 42 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="darkgreen" rx="5" ry="5" />
        </svg>
        {{def_library.41.1}}
      </p>
    {% endif %}
    {% if def_n >= 43 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="olivedrab" rx="5" ry="5" />
        </svg>
        {{def_library.42.1}}
      </p>
    {% endif %}
    {% if def_n >= 44 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="darkgoldenrod" rx="5" ry="5" />
        </svg>
        {{def_library.43.1}}
      </p>
    {% endif %}
    {% if def_n >= 45 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="sienna" rx="5" ry="5" />
        </svg>
        {{def_library.44.1}}
      </p>
    {% endif %}
    {% if def_n >= 46 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="firebrick" rx="5" ry="5" />
        </svg>
        {{def_library.45.1}}
      </p>
    {% endif %}
    {% if def_n >= 47 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="maroon" rx="5" ry="5" />
        </svg>
        {{def_library.46.1}}
      </p>
    {% endif %}
    {% if def_n >= 48 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="darkmagenta" rx="5" ry="5" />
        </svg>
        {{def_library.47.1}}
      </p>
    {% endif %}
    {% if def_n >= 49 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="indigo" rx="5" ry="5" />
        </svg>
        {{def_library.48.1}}
      </p>
    {% endif %}
    {% if def_n >= 50 %}
      <p>
        <svg width="10%" height="20">
          <rect x="10" y="5" width="10" height="10" fill="black" rx="5" ry="5" />
        </svg>
        {{def_library.49.1}}
      </p>
    {% endif %}
  </body>
</html>